<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- css -->
    <link rel="stylesheet" href="../lib/jquery-mobile-bower/css/jquery.mobile-1.4.5.min.css">
    <link rel="stylesheet" href="../lib/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../lib/fakeloader/fakeLoader.css">
    <link rel="stylesheet" href="../css/header.css">
    <link rel="stylesheet" href="../lib/slider-pro/css/slider-pro.css" />

    <!-- js -->
    <script src="../js/common.js"></script>
    <script src="../lib/jquery/jquery.min.js"></script>
    <script src="../lib/bootstrap/js/bootstrap.min.js"></script>
    <script src="../lib/fakeloader/fakeLoader.js"></script>
    <script src="../js/jQery.headroom.js"></script>
    <script src="../js/headroom.js"></script>
    <script src="../lib/slider-pro/js/jquery.sliderPro.js"></script>

    <!--  jquery-mobile 은 최하단에 놓음-->
    <script src="../lib/jquery-mobile-bower/js/jquery.mobile-1.4.5.js"></script>

</head>

<body>

    <div data-role="header" id="header" class="header headroom" data-theme="b">
        <!--        <input type="search" name="search-1" value="Serch">-->
        <a id="left-panel" href="#menuPanel" data-display="push" class="ui-btn-left">
            <span class="glyphicon glyphicon-menu-hamburger"></span>
        </a>
        <a id="right-map" href="#cartPanel" data-transition="slide" data-display="push" class="ui-btn-right">
            <span class="glyphicon glyphicon-map-marker"></span>
        </a>
        <a id="right-panel" href="#cartPanel" data-transition="slide" data-display="push" class="ui-btn-right">
            <span class="glyphicon glyphicon-shopping-cart"></span>
        </a>
    </div>
    <div data-role="page" id="main-page"></div>
    <!--    <div id="fakeloader"></div>-->

    <script>
        $(document).on('pageshow', function (e, data) {
            //            console.log('pageshow : main.html');
            $('#content').height(getRealContentHeight());
        });

        function getRealContentHeight() {
            var header = $.mobile.activePage.find("div[data-role='header']:visible");
            var footer = $.mobile.activePage.find("div[data-role='footer']:visible");
            var content = $.mobile.activePage.find("div[data-role='main']:visible:visible");
            var viewport_height = $(window).height();

            var content_height = viewport_height - header.outerHeight() - footer.outerHeight();
            if ((content.outerHeight() - header.outerHeight() - footer.outerHeight()) <= viewport_height) {
                content_height -= (content.outerHeight() - content.height());
            }
            return content_height;
        }

        $("#header").headroom({
            "offset": 205,
            "tolerance": 5,
            "classes": {
                initial: "headroom",
                pinned: "headroom--pinned",
                unpinned: "headroom--unpinned"
            }
        });
    </script>

    <script>
        $("#fakeloader").fakeLoader({
            zIndex: "9999",
            timeToHide: 1700,
            bgColor: "FFFFFF",
            imagePath: "../image/loader_03.gif"

        });
    </script>
    <script type="text/javascript">
        $(document).one("pagebeforecreate", function () {
            //            $( ":mobile-pagecontainer" ).pagecontainer( "load", "storeList.html",{role : "page"} );
            //            $("body").load("storeList.html [data-role=page]");
            
//            $.mobile.changePage("storeList.html", {
//                changeHash: false
//            });
        });
        $(document).one("pagecreate", function () {
            $.get("./menuPanel.html", function (data) {
                $.mobile.pageContainer.append(data);
                $("[data-role=panel]").panel().enhanceWithin();
            }, "html");
            $.get("./cartPanel.html", function (data) {
                $.mobile.pageContainer.append(data);
                $("[data-role=panel]").panel().enhanceWithin();
            }, "html");
        });
        $("#main-page").on("pagecreate", function () {
            console.log('pagecreate  main-page.html');

        });
        $("#main-page").on("pagebeforecreate", function (event) {
            console.log('pagebeforecreate  main-page.html');

        });
        $('#main-page').on('pagebeforeshow', function () {
            console.log('pagebeforeshow main-page.html');

        });
        $(document).one('pageshow', function () {
            console.log('pageshow main-page.html');

        });
        $('#main-page').on('pageshow', function () {
            console.log('pageshow main-page.html');

        });
        /** $(document)는 발생문서 이하 모든 이벤트에 관여
         *  $('#id')는 발생하는 지점에서 만 관여
         *
         *
         *
         */
    </script>
</body>

</html>