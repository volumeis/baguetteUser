<!-- 빌드시 삭제하는 부분 -->
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- css -->
    <link rel="stylesheet" href="../lib/jquery-mobile-bower/css/jquery.mobile-1.4.5.css" />
    <link rel="stylesheet" href="../lib/bootstrap/css/bootstrap.css" />
    <link rel="stylesheet" href="../css/header.css" />
    <link rel="stylesheet" href="../css/storeHome.css" />

    <!-- js -->
    <script src="../lib/jquery/jquery.js"></script>
    <script src="../js/jQery.headroom.js"></script>
    <script src="../js/headroom.js"></script>
    <script src="../lib/bootstrap/js/bootstrap.js"></script>
    <script src="../js/swipeNav.js"></script>
    <!--  jquery-mobie 은 최하단에 놓음-->
    <script src="../lib/jquery.rateit/jquery.rateit.js"></script>
    <script src="../lib/jquery-mobile-bower/js/jquery.mobile-1.4.5.js"></script>


</head>

<body>

    <div data-role="page" class="pages" id="store-cart-01">

        <!--header start  -->
        <div data-role="header" id="header" class="header headroom" data-theme="b">
            <div style="width:50%;"></div>
            <input type="search" name="search-1" id="search-1" value="">
            <a href=""> </a>
            <a id="left-panel" href="#menuPanel" data-display="push" class="ui-btn-left">
                <span class="glyphicon glyphicon-menu-hamburger"></span>
            </a>
            <a id="right-panel" href="#cartPanel" data-transition="slide" data-display="push" class="ui-btn-right">
                <span class="glyphicon glyphicon glyphicon-shopping-cart"></span>
            </a>
        </div>
        <!--header end-->

        <div data-role="main" class="ui-content main-content">
<!-- 빌드시 삭제하는 부분 -->
        <div data-role="ui-content">     
<!--        <div data-role="panel" id="cartPanel" data-display="overlay" data-position="right" data-theme="a">-->
			
			<div id ="maincdiv"></div>
			</div>
			<!-- 
            <div class="ui-grid-a ui-bar-a" id="cartcon">
                <div class="ui-block-a">
                    <div class="ui-bar ui-bar-c" style="height:150px; width:160px">
                        <img src="../image/dl.jpeg" class="img-rounded" width="100%" height="100%">
                    </div>
                </div>

                <div class="ui-block-b">
                    <div class="ui-bar ui-bar-c" style="height:50px; text-align:right">
                        <font style="font-size:1.5em; font-weight: bold">딸기빵</font>
                    </div>
                </div>
                <div class="ui-block-b">
                    <div class="ui-bar ui-bar-c" style="height:50px">
                        기본 빵 가격에 대한 히든 속성
                        <div id="price" style="display:none">4000</div>
                        <div id="money" style="float:right; font-size:1.5em"></div>
                    </div>
                </div>
                <div class="ui-block-b">
                    <div class="ui-bar ui-bar-c" style="height:50px">
                        <div id="delect-cart" class="ui-btn ui-icon-delete ui-btn-icon-notext ui-corner-all" style="float:right"></div>
                        <select name="select-qty" id="select-qty" data-mini="true" style="float:right">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                        </select>
                    </div>
                </div>
            </div> -->
            <!-- /grid-a -->

            <!-- <div class="ui-grid-a ui-bar-a" id="cartcon1">
                <div class="ui-block-a">
                    <div class="ui-bar ui-bar-c" style="height:150px; width:160px">
                        <img src="../image/dl.jpeg" class="img-rounded" width="100%" height="100%">
                    </div>
                </div>

                <div class="ui-block-b">
                    <div class="ui-bar ui-bar-c" style="height:50px; text-align:right">
                        <font style="font-size:1.5em; font-weight: bold">딸기빵</font>
                    </div>
                </div>
                <div class="ui-block-b">
                    <div class="ui-bar ui-bar-c" style="height:50px">
                        기본 빵 가격에 대한 히든 속성
                        <div id="price1" style="display:none">4000</div>
                        <div id="money1" style="float:right; font-size:1.5em"></div>
                    </div>
                </div>
                <div class="ui-block-b">
                    <div class="ui-bar ui-bar-c" style="height:50px">
                        <div id="delect-cart" class="ui-btn ui-icon-delete ui-btn-icon-notext ui-corner-all" style="float:right"></div>
                        <select name="select-qty1" id="select-qty1" data-mini="true" style="float:right">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                        </select>
                    </div>
                </div>
            </div> -->
            <!-- /grid-a -->

            <hr>
        <div id="totaltext" style="text-align:right">총 금액</div>
		<div id="totalprice" style="text-align:right"></div>

        </div>
        <!-- script -->
        <script type="text/javascript">
        $(function () {
        	$(document).ready(function () {
        	
        	$.ajax({
        		// 회원 번호를 통해 호출
        		url: "/cart/getJsonCart/"+1001,
        		method: "GET",
        		dataType: "json",
        		headers: {
                    "Accept": "application/json",
                    "Content-Type": "application/json"
                },
                success: function(JSONData, status) {
                	
                	$.each(JSONData.cartmap.cartlist, function(i,item){
                		
                		var cindex = i;
                		var cdiv = $(document.createElement('div')).addClass('ui-grid-a').attr('id', 'cdiv'+cindex);;
                		var cimgdiv = $(document.createElement('div')).addClass('ui-block-a').attr('id', 'cimgdiv'+cindex);
                		var ctexttop = $(document.createElement('div')).addClass('ui-block-b')
                							.attr({	id: 'ctop'+cindex,
                								style: 'height:50px; text-align: right'
                								});
                		var ctextmid = $(document.createElement('div')).addClass('ui-block-b tprice')
                							.attr({	id: 'cmid'+cindex,
                									style: 'height:50px; text-align: right'
                									
                								});
                		var ctextbot = $(document.createElement('div')).addClass('ui-block-b')
                							.attr({	id: 'cbot'+cindex,
                								style: 'height:50px'
                								});
                		
                		var cimg =
							$(document.createElement('img')).attr({
			                    src: "../image/"+JSONData.cartmap.cartlist[i].breadDesc.img+".png",
			                    class: "img-rounded",
			                    style: "height:100%; width:100%"
			                });
                		
                		var cdel = $(document.createElement('div'))
                					.addClass('ui-btn ui-icon-delete ui-btn-icon-notext ui-corner-all').attr({
                						id: "cdel"+cindex,
                						style: "float:right"
                					});
                		
                		var cselect=
                			$(document.createElement('select')).data('mini', true).attr({
                				name: "cselect"+cindex,
                				id: "cselect"+cindex,
                				style: "float:right"
                			});
                		
                		for (var j=0; j<5; j++){
                			var option = document.createElement('option');
                			option.text = j+1;
                			option.value = j+1;
                			
                			if(option.text == 1){
                				option.selected = true;		
                			}
                			
                			cselect.append(option);
                		}
                		$('#maincdiv').append(cdiv.html(cimgdiv.html(cimg)).append(ctexttop).append(ctextmid).append(ctextbot));
                		$('#ctop'+cindex).append(JSONData.cartmap.cartlist[i].breadDesc.name);
                		$('#cbot'+cindex).append(cdel).append(cselect);
                		
                		$("#cselect"+cindex).change(function () {
                			var str = 0;
                			$("#cselect"+cindex).each(function(){
                				str += +($(this).val() * JSONData.cartmap.cartlist[i].breadDesc.price);
                			});
                			$('#cmid'+cindex).text(str);
                		})
                		.change();
                		
                		
                		$("#cselect"+cindex).change(function() {
                			var sum = 0;
                			$(".tprice").each(function(){
                				sum += +($(this).text());
                				$("#totalprice").text(sum);
                			});
                		})
                		.change();
                		
                		$('#cdel'+cindex).click(function(){
                			$.ajax({
                				url : "/cart/delJsonCart/"+JSONData.cartmap.cartlist[i].cartNo,
                				method : "GET",
                				dataType : "json",
                				headers: {
			                        "Accept": "application/json",
			                        "Content-Type": "application/json"
			                    }
                				
                			});
                			
                			$('#cdiv'+cindex).remove();
                			var sum = 0;
                			$(".tprice").each(function(){
                				sum += +($(this).text());
                				$("#totalprice").text(sum);
                			});
                		});
                		
                		}) 
                	}
                })
       		})
       	});
        	
        	
        	</script>
        <script src="../js/cart.js"></script>
        
<!-- 빌드시 삭제하는 부분 -->
    </div>
</body>

</html>
<!-- 빌드시 삭제하는 부분 -->