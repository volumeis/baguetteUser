<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <link rel="stylesheet" href="../lib/bootstrap/css/bootstrap.css">
    <link rel="stylesheet" href="../lib/jquery-mobile-bower/js/jquery.mobile-1.4.5.js">

    <script src="../lib/jquery/jquery.js"></script>
    <script src="../lib/bootstrap/js/bootstrap.js"></script>

    
    <script src="../lib/jquery-mobile-bower/js/jquery.mobile-1.4.5.js"></script>

    <title>User Login</title>

</head>

<body>

    <div style="margin-top:60px">
        <div>
            <img src="../image/login.png" class="center-block" style="width:70%">
        </div>
    </div>
    <div>
        <div class="center-block" style="width:70%;">
            <input type="text" class="form-control" id="customerTel" name="customerTel" placeholder="휴대폰">
        </div>
        <div class="center-block" style="width:70%; margin-top:10px">
            <input type="text" class="form-control" id="password" name="password" placeholder="비밀번호">
        </div>
    </div>
    <div class="center-block" style="width:70%; margin-top:20px">
        <a href="storeList.html" rel="external" data-role="none" type="button" class="btn btn-default btn-block">로그인</a>
        <!--                <button data-role="none" type="button" id="login" class="btn btn-default btn-block">로그인</button>-->
    </div>

    <div style="margin:65px 0px 0px 0px; text-align:center">
        <a href="addCustomer.html" rel="external">새 Baguette 계정 만들기</a>
    </div>


    <!-- test jquery -->
    <script type="text/javascript">
        $(function () {

            $("#login").click(function () {
                var customerTel = $("#customerTel").val().trim();
                var customerPwd = $("#password").val().trim();
                $.ajax({
                    /* url : "/customer/getJsonCustomer/"+userId , */
                    url: "/customer/getJsonCustomer/" + customerTel,
                    method: "GET",
                    dataType: "json",
                    headers: {
                        "Accept": "application/json",
                        "Content-Type": "application/json"
                    },
                    success: function (JSONData, status) {

                        if (JSONData.customer != null) {
                            if (customerTel == JSONData.customer.customerTel) {
                                alert("존재하는 계정입니다.비밀번호 일치 : " + (customerPwd == JSONData.customer.password));
                            }
                            if (customerTel == JSONData.customer.customerTel && customerPwd == JSONData.customer.password) {

                                location.href = "./html/storeList.html";
                                return;
                            }
                        }
                        alert("없는 계정입니다. ");
                    },
                    error: function (JSONData, status) {
                        alert("잘못된 요청입니다.");
                    }
                });
            });
        });
    </script>

</body>

</html>