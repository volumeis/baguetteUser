<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- css -->
    <link rel="stylesheet" href="../lib/jquery-mobile-bower/css/jquery.mobile-1.4.5.css" />
    <link rel="stylesheet" href="../lib/bootstrap/css/bootstrap.css" />
    <link rel="stylesheet" href="../css/header.css" />
    <!-- js -->
    <script src="../js/common.js"></script>
    <script src="../lib/jquery/jquery.js"></script>
    <script src="../js/jQery.headroom.js"></script>
    <script src="../js/headroom.js"></script>
    <script src="../lib/bootstrap/js/bootstrap.js"></script>

    <!--  jquery-mobile 은 최하단에 놓음-->
    <script src="../lib/jquery-mobile-bower/js/jquery.mobile-1.4.5.js"></script>
    <script type="text/javascript">
        $(document).one("pagecreate", function () {
            $.get("./menuPanel.html", function (data) {
                $.mobile.pageContainer.append(data);
                $("[data-role=panel]").panel().enhanceWithin();
            }, "html");
            $.get("./cartPanel.html", function (data) {
                $.mobile.pageContainer.append(data);
                $("[data-role=panel]").panel().enhanceWithin();
            }, "html");
        });
    </script>
    <script>
        $(function () {
            //            $("[data-role='navbar']").navbar();
            $("[data-role='header']").toolbar();
            //            $.mobile.loadPage("storeList.html");
            $.mobile.changePage("storeList.html");
        });
    </script>
</head>
<!-- /////////////////////////////////////////////   -->



<body>
    <div data-role="header" id="header" class="header headroom" data-theme="b">
        <!--        <input type="search" name="search-1" value="Serch">-->
        <a id="left-panel" href="#menuPanel" data-display="push" class="ui-btn-left">
            <span class="glyphicon glyphicon-menu-hamburger"></span>
        </a>
        <a id="right-panel" href="#cartPanel" data-transition="slide" data-display="push" class="ui-btn-right">
            <span class="glyphicon glyphicon glyphicon-shopping-cart"></span>
        </a>
    </div>
    <!-- jqm header, footer 브라우저 양 끝 단 위치 및 높이 조절-->
    <div data-role="page" id="main-page"></div>

    <script>
        $(document).on('pageshow', '#index', function (e, data) {
            $('#content').height(getRealContentHeight());
        });

        function getRealContentHeight() {
            var header = $.mobile.activePage.find("div[data-role='header']:visible");
            var footer = $.mobile.activePage.find("div[data-role='footer']:visible");
            var content = $.mobile.activePage.find("div[data-role='main']:visible:visible");
            var viewport_height = $(window).height();

            var content_height = viewport_height - header.outerHeight() - footer.outerHeight();
            if ((content.outerHeight() - header.outerHeight() - footer.outerHeight()) <= viewport_height) {
                content_height -= (content.outerHeight() - content.height());
            }
            return content_height;
        }

        $("#header").headroom({
            "offset": 205,
            "tolerance": 5,
            "classes": {
                initial: "headroom",
                pinned: "headroom--pinned",
                unpinned: "headroom--unpinned"
            }
        });

        //   방문한 페이지 다시 로드하지않음
        $(function () {
            $.mobile.page.prototype.options.domCache = true;
        });
    </script>

</body>

</html>